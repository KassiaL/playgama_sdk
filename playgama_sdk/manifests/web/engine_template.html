<html>

<head>
    <script src="./playgama-bridge.js"></script>
    <script type="text/javascript">
        window.is_bridge_inited = false
        bridge.initialize().then(() => {

            const AD_OPENED = 0
            const AD_CLOSED = 1
            const AD_REWARDED = 2
            const AD_FAILED = 3

            bridge.advertisement.on(
                bridge.EVENT_NAME.REWARDED_STATE_CHANGED,
                state => {
                    if (state === "opened") JsToDef.send("rew_state", AD_OPENED)
                    else if (state === "closed") JsToDef.send("rew_state", AD_CLOSED)
                    else if (state === "rewarded") JsToDef.send("rew_state", AD_REWARDED)
                    else if (state === "failed") JsToDef.send("rew_state", AD_FAILED)
                }
            )

            bridge.advertisement.on(
                bridge.EVENT_NAME.INTERSTITIAL_STATE_CHANGED,
                state => {
                    if (state === "opened") JsToDef.send("inter_state", AD_OPENED)
                    else if (state === "closed") JsToDef.send("inter_state", AD_CLOSED)
                    else if (state === "failed") JsToDef.send("inter_state", AD_FAILED)
                }
            )

            window.is_bridge_inited = true

        }).catch(error => {
            console.log("error when initialize bridge");
            console.log(error);
        });
    </script>
</head>

</html>